<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='Homestyle.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='icon.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Agdasima:wght@400;700&family=Rubik+Wet+Paint&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="fixed-icon">
        <a onclick="window.location.href='https://github.com/SirSevrus/Library-win'" target="_blank" aria-label="GitHub Profile">
            <svg class="git-icon" xmlns="http://www.w3.org/2000/svg" width="64px" height="64px" viewBox="0 0 64 64">
                <g id="SVGRepo_bgCarrier" stroke-width="0"/>             
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>                
                <g id="SVGRepo_iconCarrier"> <rect id="Icons" x="0" y="-192" width="1280" height="800" style="fill:none;"/> <g id="Icons1" serif:id="Icons"> <g id="Strike"> </g> <g id="H1"> </g> <g id="H2"> </g> <g id="H3"> </g> <g id="list-ul"> </g> <g id="hamburger-1"> </g> <g id="hamburger-2"> </g> <g id="list-ol"> </g> <g id="list-task"> </g> <g id="trash"> </g> <g id="vertical-menu"> </g> <g id="horizontal-menu"> </g> <g id="sidebar-2"> </g> <g id="Pen"> </g> <g id="Pen1" serif:id="Pen"> </g> <g id="clock"> </g> <g id="external-link"> </g> <g id="hr"> </g> <g id="info"> </g> <g id="warning"> </g> <g id="plus-circle"> </g> <g id="minus-circle"> </g> <g id="vue"> </g> <g id="cog"> </g> <path id="github" d="M32.029,8.345c-13.27,0 -24.029,10.759 -24.029,24.033c0,10.617 6.885,19.624 16.435,22.803c1.202,0.22 1.64,-0.522 1.64,-1.16c0,-0.569 -0.02,-2.081 -0.032,-4.086c-6.685,1.452 -8.095,-3.222 -8.095,-3.222c-1.093,-2.775 -2.669,-3.514 -2.669,-3.514c-2.182,-1.492 0.165,-1.462 0.165,-1.462c2.412,0.171 3.681,2.477 3.681,2.477c2.144,3.672 5.625,2.611 6.994,1.997c0.219,-1.553 0.838,-2.612 1.526,-3.213c-5.336,-0.606 -10.947,-2.669 -10.947,-11.877c0,-2.623 0.937,-4.769 2.474,-6.449c-0.247,-0.608 -1.072,-3.051 0.235,-6.36c0,0 2.018,-0.646 6.609,2.464c1.917,-0.533 3.973,-0.8 6.016,-0.809c2.041,0.009 4.097,0.276 6.017,0.809c4.588,-3.11 6.602,-2.464 6.602,-2.464c1.311,3.309 0.486,5.752 0.239,6.36c1.54,1.68 2.471,3.826 2.471,6.449c0,9.232 -5.62,11.263 -10.974,11.858c0.864,0.742 1.632,2.208 1.632,4.451c0,3.212 -0.029,5.804 -0.029,6.591c0,0.644 0.432,1.392 1.652,1.157c9.542,-3.185 16.421,-12.186 16.421,-22.8c0,-13.274 -10.76,-24.033 -24.034,-24.033" style="fill:#010101;"/> <g id="logo"> </g> <g id="radio-check"> </g> <g id="eye-slash"> </g> <g id="eye"> </g> <g id="toggle-off"> </g> <g id="shredder"> </g> <g id="spinner--loading--dots-" serif:id="spinner [loading, dots]"> </g> <g id="react"> </g> <g id="check-selected"> </g> <g id="turn-off"> </g> <g id="code-block"> </g> <g id="user"> </g> <g id="coffee-bean"> </g> <g id="coffee-beans"> <g id="coffee-bean1" serif:id="coffee-bean"> </g> </g> <g id="coffee-bean-filled"> </g> <g id="coffee-beans-filled"> <g id="coffee-bean2" serif:id="coffee-bean"> </g> </g> <g id="clipboard"> </g> <g id="clipboard-paste"> </g> <g id="clipboard-copy"> </g> <g id="Layer1"> </g> </g> </g>               
            </svg>
        </a>
        <p class="hid-msg">Source Code</p>
    </div>    
    <div class="container">
        <header class="header">
            <h1 class="greeting">Welcome to the Digital Library</h1>           
            {% if can_add_book %}
                <div class="btn-group">
                    <a href="{{ url_for('add_book') }}" class="btn add-book-btn" aria-label="Add a new book">
                        <i class="fas fa-plus"></i> Add a New Book
                    </a>
                    <a href="{{ url_for('manage_books') }}" class="btn add-book-btn" aria-label="Manage Books">
                        <i class="fas fa-plus"></i> Manage Books
                    </a>
                    <a href="{{ url_for('settings') }}" class="btn stop-server-btn" aria-label="Stop Server">
                        <i class="fas fa-stop-circle"></i> Stop Server
                    </a>
                </div>
            {% endif %}
        </header>

        <!-- Search Bar -->
        <form action="{{ url_for('home') }}" method="get" class="search-form" aria-label="Search form">
            <input type="text" name="search" placeholder="Search for a book by title or author" class="search-input" aria-label="Search input" value="{{ request.args.get('search', '') }}">
            <button type="submit" class="search-btn" aria-label="Search button">Search
                <i class="fas fa-search"></i>
            </button>
            {% if request.args.get('search') %}
                <button type="button" class="reset-btn" onclick="resetSearch()" aria-label="Reset search">Reset</button>
            {% endif %}
        </form>
        
        <main>
            <h2 class="av-books">Available Books 
                {% if books %}
                    ({{ books|length }} found)
                {% else %}
                    (0 found)
                {% endif %}
            </h2>
            
            {% if books %}
                <ul class="book-list">
                    {% for book in books %}
                        <li class="book-item">
                            <a href="{{ url_for('view_book_pdf', checksum=book['checksum']) }}" target="_parent" class="book-link">
                                <strong>{{ book['title'] }}</strong>
                            </a> 
                            <span><p></p>
                                <a href="{{ url_for('home', search=book['author']) }}" class="author-link">{{ book['author'] }}</a>
                            </span>                            
                            <p class="desc">Description:</p>
                            <p class="desc-cont">{{ book['description'] }}</p>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="no-books-message">No books found for your search. Try different keywords or check back later.</p>
            {% endif %}
        </main>
    </div>

    <script>
        function resetSearch() {
            const searchInput = document.querySelector('.search-input');
            searchInput.value = '';
            window.location.href = "{{ url_for('home') }}";
        }
    </script>
</body>
</html>
